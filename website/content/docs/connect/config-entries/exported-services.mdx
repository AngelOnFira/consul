---
layout: docs
page_title: 'Configuration Entry Kind: Exported Services'
description: >-
  The exported-services configuration entry enables you to export services from a single file.
  Settings in this configuration entry can apply to services in any namespace of the specified partition. Write access to the mesh resource is required.
---

# Exported Services

<EnterpriseAlert />

This topic describes the `exported-services` configuration entry type. The `exported-services` configuration entry enables Consul to export service instances to other admin partitions from a single file. This enables your services to be networked across admin partitions. See [Admin Partitions](/docs/enterprise/admin-partitions) for additional information.

-> **v1.11.0+:** This config entry is supported in Consul Enterprise versions 1.11.0+.

## Introduction

You can configure Consul to export services contained in an admin partition to one or more additional partitions by declaring the `exported-services` configuration entry in the `kind` field. This enables you to route traffic between services in different clusters that share a single set of Consul servers.

You can configure the settings defined in the `exported-services` configuration entry to apply to all namespaces and federated datacenters.

## Requirements

- A Consul Enterprise binary
- A corresponding partition that the configuration entry can export to. For example, the `exported-services` configuration entry for a partition named `frontend` requires an existing `frontend` partition.

## Usage

1. Verify that your datacenter meets the conditions specified in the [Requirements](#requirements).
1. Specify the `exported-services` configuration in the agent configuration file (see [`config_entries`](/docs/agent/options#config_entries)) as described in [Configuration](#configuration).
1. Apply the configuration using one of the following methods:
   - Kubernetes CRD: Refer to the [Custom Resource Definitions](/docs/k8s/crds) documentation for details.
   - Issue the `consul config write` command: Refer to the [Consul Config Write](/commands/config/write) documentation for details.

## Configuration

Configure the following parameters to define a `exported-services` configuration entry:

<CodeTabs heading="Exported services configuration syntax" tabs={[ "HCL", "Kubernetes YAML", "JSON" ]}>
<CodeBlockConfig>

```hcl
Kind = "exported-services"
Partition = "<partition containing services to export>"
Name = "<partition containing services to export>"
Services = [
  {
    Name = "<name of service to export>"
    Namespace = "<namespace in the partition containing the service to export>"
    Consumers = [
      {
        Partition = "<name of the partition that will dial the exported service>"
      },
    ]
  }
]
```

</CodeBlockConfig>
<CodeBlockConfig>

```yaml
apiVersion: consul.hashicorp.com/v1alpha1
Kind: ExportedServices
metadata:
  name: <partition containing services to export>
spec:
  services:
    - name: <name of service to export>
      namespace: <namespace in the partition containing the service to export>
      consumers:
        - partition: <name of the partition that will dial the exported service>
```

</CodeBlockConfig>
<CodeBlockConfig>

```json
"Kind": "exported-services",
"Partition": "<partition containing services to export>",
"Name": "<partition containing services to export>",
"Services": [
  {
    "Consumers": [
      {
        "Partition": "<name of partition that will dial the exported service>"
      }
    ],
    "Name": "<name of service to export>",
    "Namespace": "<namespace in the partition containing the service to export>"
  }
]
```

</CodeBlockConfig>
</CodeTabs>

### Configuration Parameters

The following list describes the parameters associated with the `exported-services` configuration entry.

<ConfigEntryReference
  keys={[
    {
      name: 'apiVersion',
      description: 'Must be set to `consul.hashicorp.com/v1alpha1`',
      hcl: false,
    },
    {
      name: 'Kind',
      description: {
        hcl: 'Must be set to `exported-services`',
        yaml: 'Must be set to `ExportedServices`',
      },
    },
    {
      name: 'Name',
      description: 'Specifies the name of the partition that contains the services you want to export.',
      yaml: false,
    },
    {
      name: 'Partition',
      type: `string: "default"`,
      enterprise: true,
      description: 'Specifies the name of the partition that contains the services you want to export.',
      yaml: false,
    },
    {
      name: 'Meta',
      type: 'map<string|string>: nil',
      description: 'Object that defines a map of the max 64 key/value pairs.',
      yaml: false,
    },
    {
      name: 'metadata',
      children: [
        {
          name: 'name',
          description: 'Specifies the name of the partition that contains the services you want to export.',
        },
        {
          name: 'namespace',
          description:
            'If running Consul Open Source, the namespace is ignored (see [Kubernetes Namespaces in Consul OSS](/docs/k8s/crds#consul-oss)). If running Consul Enterprise see [Kubernetes Namespaces in Consul Enterprise](/docs/k8s/crds#consul-enterprise) for more details.',
        },
      ],
      hcl: false,
    },
    {
      name: 'Services',
      type: 'array<Service>: <required>',
      description: 'List of objects that specify which services to export.',
      children: [
        {
          name: 'Name',
          type: 'string: <required>',
          description: 'Specifies the name of the service to export. You can use a asterisk wildcard (`*`) to include all services in the namespace.',
        },
        {
          name: 'Namespace',
          type: 'string: "default"',
          description: 'Specifies the namespace containing the services to export. You can use a asterisk wildcard (`*`) to include all namespaces in the partition.',
        },
        {
          name: 'Consumers',
          type: 'array<string>: <required>',
          description: 'Specifies one or more objects that identify a destination partition for the exported services.',
          children: [
            {
              name: 'Partition',
              type: 'string: <required>',
              description: 'Specifies the destination partition for the exported services.',
            },
          ],
        },
      ],
    },
  ]}
/>

## Example

The following example configures the agent to export the `billing` service from the `default` namespace of the `finance` admin partition to the `frontend` and `backend` partitions. Additionally, all services in all namespaces within the `finance` partition will be exported to the `monitoring` partition.

<CodeTabs heading="" tabs={[ "HCL", "Kubernetes YAML", "JSON" ]}>
<CodeBlockConfig>

```hcl
Kind = "exported-services"
Partition = "finance"
Name = "finance"

Services = [
  {
    Name = "billing"
    Namespace = "default"
    Consumers = [
        {
            Partition  = "frontend"
        },
        {
            Partition  = "backend"
        }
    ]
  },
  {
    Name      = "*"
    Namespace = "*"
    Consumers = [
        {
            Partition  = "monitoring"
        }
    ]
  }
]
```

</CodeBlockConfig>
<CodeBlockConfig>

```yaml
apiVersion: consul.hashicorp.com/v1alpha1
Kind: ExportedServices
metadata:
  name: finance
spec:
  services:
    - name: mesh-gateway
      namespace: default
      consumers:
        - partition: default
    - name: billing
      namespace: default
      consumers:
        - partition: frontend
        - partition: backend
```

</CodeBlockConfig>
<CodeBlockConfig>

```json
"Kind": "exported-services",
  "Partition": "finance",
  "Name": "finance",
  "Services": [
    {
      "Consumers": [
        {
          "Partition": "frontend"
        },
        {
          "Partition": "backend"
        }
      ],
      "Name": "billing",
      "Namespace": "default"
    },
    {
      "Consumers": [
        {
          "Partition": "monitoring"
        }
      ],
      "Name": "*",
      "Namespace": "*"
    }
  ]
```

</CodeBlockConfig>
</CodeTabs>

## Reading Services

When an exported service has been imported to another partition, you can use the `health` REST API endpoint to query the service on the consumer partition. The following example queries the `finance` partition for the imported `billing` service:

```shell-session
$ curl 'localhost:8500/v1/health/connect/billing?partition=finance'
```

An ACL token with `service:write` permissions is required for the partition from which the query is made. If the call in the previous example is made from a service named `web` in a partition named `frontend`, then the request will require a token with `write` permissions to `web` in the `frontend` partition.

Exports are available to all services in the consumer partition. In the previous example, any service with `write` permissions for the `frontend` partition will be able to read exports.

See [Health HTTP Endpoint](/api-docs/health) for additional information.
